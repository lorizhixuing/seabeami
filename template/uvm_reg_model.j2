/*
    THIS MODEL IS GENERATED BY SCRIPT AUTOMATICALLY
*/

`ifndef {{ module.upper() }}_RAL_MODEL_SV
`define {{ module.upper() }}_RAL_MODEL_SV
{% include "uvm_reg.svh" %}
{% include "uvm_reg_block.svh" %}

class {{ module }}_ral_model extends uvm_reg_block;
  {% for key, block in root %}
  rand block_{{ module }}_{{ block.name }} {{ block.name }};
  {% endfor %}

  {% if factory %}
  `uvm_object_utils_begin({{ module }}_ral_model)
  {% for key, block in root %}
    `uvm_field_object({{ block.name }}, UVM_ALL_ON)
  {% endfor %}
  `uvm_object_utils_end
  {% endif %}

  function new(string name="{{ module }}_ral_model");
    super.new(name);
  endfunction

  function void build();
    default_map = create_map("default_map", 0, {{ (width/8)|int }}, UVM_LITTLE_ENDIAN);
    {% for key, block in root %}

    {% if factory %}
    {{ block.name }} = block_{{ module }}_{{ block.name }}::type_id::create("{{ block.name }}");
    {% else %}
    {{ block.name }} = new("{{ block.name }}");
    {% endif %}
    {{ block.name }}.configure(this);
    {{ block.name }}.build();
    default_map.add_submap({{ block.name }}.default_map, {{ block.width }}'h{{ block.offset }});
    {% endfor %}
  endfunction
endclass : {{ module }}_ral_model

`endif
